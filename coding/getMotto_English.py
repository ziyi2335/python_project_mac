#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time    : 2018/6/17 下午9:13# @Author  : ziyi# @File    : getMotto_English.py# @Software: PyCharmimport randomimport timeimport requestsfrom bs4 import BeautifulSoupfrom requests import RequestExceptionimport datetimefrom selenium import webdriverfrom selenium.webdriver.support.wait import WebDriverWaitdef get_header():    user_agent_list = [        "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1", \        "Mozilla/5.0 (X11; CrOS i686 2268.111.0) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11", \        "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1092.0 Safari/536.6", \        "Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1090.0 Safari/536.6", \        "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/19.77.34.5 Safari/537.1", \        "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.9 Safari/536.5", \        "Mozilla/5.0 (Windows NT 6.0) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.36 Safari/536.5", \        "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1063.0 Safari/536.3", \        "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1063.0 Safari/536.3", \        "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_0) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1063.0 Safari/536.3", \        "Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1062.0 Safari/536.3", \        "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1062.0 Safari/536.3", \        "Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.1 Safari/536.3"    ]    headers = {'User-Agent': random.choice(user_agent_list)}    return headersdef get_html(url):    headers = get_header()    soup = None    try:        response = requests.get(url, timeout=30, headers=headers)        if response.status_code == 200:            # 解析乱码的解决情况            response.encoding = response.apparent_encoding            html = response.text            soup = BeautifulSoup(html, 'html.parser')  # 设置解析器为“html”            # print(soup)        else:            print('获取不到', url, response.status_code)    except RequestException as e:        print('获取不到', url, e)    time.sleep(3)    return soupdef get_motto_english():    url = "http://www.dailyenglishquote.com/"    soup = get_html(url)    day_motto = soup.find('div', id='content')    english_motto = day_motto.find('strong').string    print(english_motto)    writer = day_motto.find('ul').find('li').string    print(writer)    # translation_chinese = soup.strong.parent.next_sibling.next_sibling    translation_chinese = day_motto.ul.previous_sibling.previous_sibling.get_text()    print(translation_chinese)    # 根据属性模糊匹配内容    return english_motto# 金山词霸的每日一句def get_iciba():    daytime = datetime.datetime.now()    url = 'http://news.iciba.com/views/dailysentence/daily.html#!/detail/title/{}'.format(daytime.date())    if daytime.hour >= 20 and daytime.hour <= 23:        print('daytime', daytime.date())        url = 'http://news.iciba.com/views/dailysentence/daily.html#!/detail/title/{}'.format(daytime.date())    elif daytime.hour >= 0 and daytime.hour <= 10:        daytime = daytime + datetime.timedelta(-1)        print('daytime', daytime.date())        url = 'http://news.iciba.com/views/dailysentence/daily.html#!/detail/title/{}'.format(daytime.date())    # 启动浏览器，executable_path路径要根据自己chromedriver.exe的位置更改    driver = webdriver.Chrome(executable_path=r'/Users/lvzeqin/Applications/chromedriver')    # 设置浏览器窗口位置及大小    # driver.set_window_rect(x=0, y=0, width=667, height=748)    # 设定页面加载限制时间    driver.set_page_load_timeout(60)    driver.get(url)    driver.execute_script('window.scrollTo(0, 0.8*document.body.scrollHeight)')    time.sleep(3)    driver.execute_script('window.scrollTo(0.8*document.body.scrollHeight,0.1*document.body.scrollHeight)')    time.sleep(3)    try:        motto = driver.find_element_by_xpath('//div[@class="detail-content-en"]').text        translation = driver.find_element_by_xpath('//div[@class="detail-content-zh"]').text        detail = driver.find_element_by_xpath('//blockquote[@class="detail-content-desc"]').text    except Exception as e :        motto = translation = detail = None    print(motto, '\n', translation, '\n', detail)    return mottoif __name__ == '__main__':    # get_motto_english()    get_iciba()