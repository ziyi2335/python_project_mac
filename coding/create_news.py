#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time    : 2018/8/3 下午11:46# @Author  : ziyi# @File    : create_news.py# @Software: PyCharmimport timeimport datetimeimport haxi_head as headimport get_weather as weaimport getMotto_English as mottodef get_contents(path):    send_contents = None    try:        with open(path, encoding='utf16') as f:            contents = f.readlines()        send_contents = ''.join(content.replace('\xa0', '').replace(' ', '') for content in contents)    except Exception as e:        pass    try:        with open(path, encoding='utf8') as f:            contents = f.readlines()        send_contents = ''.join(content.replace('\xa0', '').replace(' ', '') for content in contents)    except Exception as e:        print('不是utf8的编码格式')    return send_contentsif __name__ == '__main__':    path = '../data/chatrooms/chat_news_origin.txt'    nowtime = datetime.datetime.now()    print(nowtime)    # if nowtime.hour >= 20:    try:        weather = wea.get_low_high()    except:        weather = 0    try:        btc_price = head.get_price3()    except:        btc_price = '截止00点00分，比特币价格为：＄6915.20。'    send_contents = get_contents(path)    haxi_head_content = head.head_content()    # 每天是获取前一天的名言，这样可以保证新闻可以早点跑    try:        english_motto = motto.get_iciba()    except Exception as e:        english_motto = 'Whatever is worth doing is worth doing well.'        print('e')    contents = haxi_head_content + btc_price + '\n' + send_contents + '\n' + english_motto    print('get-news', contents)    with open('../data/chatrooms/chat_news.txt', 'w') as send:        send.write(contents)